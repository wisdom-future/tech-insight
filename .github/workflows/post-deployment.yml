# .github/workflows/fix-deployment.yml
name: ğŸ”§ Fix Tech Insight Deployment

on:
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  fix-and-deploy:
    runs-on: ubuntu-latest
    name: ğŸ”§ Fix Dependencies and Deploy
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'

      - name: Create Complete Project Structure
        run: |
          echo "ğŸ“ Creating complete project structure..."
          
          # åˆ›å»ºæ‰€æœ‰å¿…éœ€çš„ç›®å½•
          mkdir -p {src/{components/{common,charts,layout},views/System,router,store,utils,assets/{images,styles}},public,scripts,data/{overview,collection,analysis,action,system,reports}}
          
          # ç”Ÿæˆ package.json
          cat > package.json << 'EOF'
          {
            "name": "tech-insight",
            "version": "1.0.0",
            "description": "ICTæŠ€æœ¯æƒ…æŠ¥å†³ç­–å¼•æ“",
            "type": "module",
            "scripts": {
              "dev": "vite",
              "build": "vite build",
              "preview": "vite preview",
              "lint": "eslint . --ext .vue,.js,.jsx,.cjs,.mjs --fix",
              "format": "prettier --write src/",
              "data:fetch": "node scripts/fetch-data.js"
            },
            "dependencies": {
              "vue": "^3.4.0",
              "vue-router": "^4.2.5",
              "pinia": "^2.1.7",
              "axios": "^1.6.0",
              "dayjs": "^1.11.10",
              "echarts": "^5.4.3",
              "vue-echarts": "^6.6.1",
              "element-plus": "^2.4.4",
              "@element-plus/icons-vue": "^2.3.1",
              "lodash-es": "^4.17.21"
            },
            "devDependencies": {
              "@vitejs/plugin-vue": "^4.5.2",
              "vite": "^5.0.8",
              "tailwindcss": "^3.4.0",
              "autoprefixer": "^10.4.16",
              "postcss": "^8.4.32",
              "eslint": "^8.56.0",
              "eslint-plugin-vue": "^9.19.2",
              "prettier": "^3.1.1"
            }
          }
          EOF

      - name: Generate Configuration Files
        run: |
          # vite.config.js
          cat > vite.config.js << 'EOF'
          import { defineConfig } from 'vite'
          import vue from '@vitejs/plugin-vue'
          import { resolve } from 'path'

          export default defineConfig({
            plugins: [vue()],
            base: '/tech-insight/',
            resolve: {
              alias: {
                '@': resolve(__dirname, 'src')
              }
            },
            build: {
              outDir: 'dist',
              assetsDir: 'assets',
              rollupOptions: {
                output: {
                  manualChunks: {
                    vendor: ['vue', 'vue-router', 'pinia'],
                    charts: ['echarts', 'vue-echarts'],
                    ui: ['element-plus', '@element-plus/icons-vue']
                  }
                }
              }
            },
            server: {
              port: 3000,
              host: true
            }
          })
          EOF

          # tailwind.config.js
          cat > tailwind.config.js << 'EOF'
          module.exports = {
            content: [
              "./index.html",
              "./src/**/*.{vue,js,ts,jsx,tsx}",
            ],
            theme: {
              extend: {
                colors: {
                  primary: {
                    50: '#eff6ff',
                    500: '#3b82f6',
                    600: '#2563eb',
                    700: '#1d4ed8',
                  },
                  success: {
                    50: '#f0fdf4',
                    500: '#22c55e',
                    600: '#16a34a',
                  },
                  warning: {
                    50: '#fffbeb',
                    500: '#f59e0b',
                    600: '#d97706',
                  },
                  danger: {
                    50: '#fef2f2',
                    500: '#ef4444',
                    600: '#dc2626',
                  }
                }
              }
            },
            plugins: []
          }
          EOF

          # postcss.config.js
          cat > postcss.config.js << 'EOF'
          module.exports = {
            plugins: {
              tailwindcss: {},
              autoprefixer: {},
            },
          }
          EOF

      - name: Generate HTML Entry
        run: |
          cat > index.html << 'EOF'
          <!DOCTYPE html>
          <html lang="zh-CN">
          <head>
            <meta charset="UTF-8" />
            <link rel="icon" type="image/svg+xml" href="/favicon.ico" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <title>ICTæŠ€æœ¯æƒ…æŠ¥å†³ç­–å¼•æ“</title>
            <meta name="description" content="åŸºäºAIçš„æŠ€æœ¯æƒ…æŠ¥æ”¶é›†ã€åˆ†æå’Œå†³ç­–æ”¯æŒç³»ç»Ÿ" />
          </head>
          <body>
            <div id="app"></div>
            <script type="module" src="/src/main.js"></script>
          </body>
          </html>
          EOF

          # ç”Ÿæˆfavicon
          echo "ğŸ“ Creating favicon..."
          mkdir -p public
          # åˆ›å»ºç®€å•çš„SVG favicon
          cat > public/favicon.ico << 'EOF'
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
            <circle cx="16" cy="16" r="14" fill="#3b82f6"/>
            <text x="16" y="22" text-anchor="middle" fill="white" font-size="18" font-weight="bold">T</text>
          </svg>
          EOF

      - name: Generate Vue Application
        run: |
          # src/main.js
          cat > src/main.js << 'EOF'
          import { createApp } from 'vue'
          import { createPinia } from 'pinia'
          import ElementPlus from 'element-plus'
          import 'element-plus/dist/index.css'
          import * as ElementPlusIconsVue from '@element-plus/icons-vue'
          import App from './App.vue'
          import router from './router'
          import './assets/styles/main.css'

          const app = createApp(App)
          const pinia = createPinia()

          // æ³¨å†ŒElementPluså›¾æ ‡
          for (const [key, component] of Object.entries(ElementPlusIconsVue)) {
            app.component(key, component)
          }

          app.use(pinia)
          app.use(router)
          app.use(ElementPlus)
          app.mount('#app')
          EOF

          # src/App.vue
          cat > src/App.vue << 'EOF'
          <template>
            <div id="app" class="min-h-screen bg-gray-50">
              <Header />
              <div class="flex">
                <Sidebar />
                <main class="flex-1 p-6">
                  <router-view />
                </main>
              </div>
              <Footer />
            </div>
          </template>

          <script setup>
          import Header from '@/components/layout/Header.vue'
          import Sidebar from '@/components/layout/Sidebar.vue'
          import Footer from '@/components/layout/Footer.vue'
          </script>
          EOF

          # ç”Ÿæˆæ ·å¼æ–‡ä»¶
          cat > src/assets/styles/main.css << 'EOF'
          @import 'tailwindcss/base';
          @import 'tailwindcss/components';
          @import 'tailwindcss/utilities';

          /* è‡ªå®šä¹‰æ ·å¼ */
          .tech-card {
            @apply bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow;
          }

          .status-active {
            @apply text-green-600 bg-green-100 px-2 py-1 rounded-full text-sm;
          }

          .trend-up {
            @apply text-green-600;
          }

          .trend-down {
            @apply text-red-600;
          }
          EOF

      - name: Generate Router Configuration
        run: |
          cat > src/router/index.js << 'EOF'
          import { createRouter, createWebHistory } from 'vue-router'
          import Overview from '@/views/Overview.vue'
          import Collection from '@/views/Collection.vue'
          import Analysis from '@/views/Analysis.vue'
          import Action from '@/views/Action.vue'
          import Reports from '@/views/Reports.vue'

          const routes = [
            {
              path: '/',
              name: 'Overview',
              component: Overview,
              meta: { title: 'æ¦‚è§ˆæ€»è§ˆ' }
            },
            {
              path: '/collection',
              name: 'Collection',
              component: Collection,
              meta: { title: 'æ•°æ®é‡‡é›†' }
            },
            {
              path: '/analysis',
              name: 'Analysis',
              component: Analysis,
              meta: { title: 'æƒ…æŠ¥åˆ†æ' }
            },
            {
              path: '/action',
              name: 'Action',
              component: Action,
              meta: { title: 'è¡ŒåŠ¨å»ºè®®' }
            },
            {
              path: '/reports',
              name: 'Reports',
              component: Reports,
              meta: { title: 'æŠ¥å‘Šä¸­å¿ƒ' }
            }
          ]

          const router = createRouter({
            history: createWebHistory('/tech-insight/'),
            routes
          })

          router.beforeEach((to, from, next) => {
            document.title = `${to.meta.title} - ICTæŠ€æœ¯æƒ…æŠ¥å†³ç­–å¼•æ“`
            next()
          })

          export default router
          EOF

      - name: Generate Layout Components
        run: |
          # Headerç»„ä»¶
          cat > src/components/layout/Header.vue << 'EOF'
          <template>
            <header class="bg-white shadow-sm border-b">
              <div class="px-6 py-4">
                <div class="flex items-center justify-between">
                  <div class="flex items-center space-x-4">
                    <h1 class="text-2xl font-bold text-gray-900">
                      ğŸ§  ICTæŠ€æœ¯æƒ…æŠ¥å†³ç­–å¼•æ“
                    </h1>
                    <span class="px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full">
                      v1.0.0
                    </span>
                  </div>
                  <div class="flex items-center space-x-4">
                    <el-badge :value="alertCount" class="item">
                      <el-button :icon="Bell" circle />
                    </el-badge>
                    <span class="text-sm text-gray-600">
                      æœ€åæ›´æ–°: {{ lastUpdate }}
                    </span>
                  </div>
                </div>
              </div>
            </header>
          </template>

          <script setup>
          import { ref, onMounted } from 'vue'
          import { Bell } from '@element-plus/icons-vue'
          import dayjs from 'dayjs'

          const alertCount = ref(3)
          const lastUpdate = ref('')

          onMounted(() => {
            lastUpdate.value = dayjs().format('YYYY-MM-DD HH:mm')
          })
          </script>
          EOF

          # Sidebarç»„ä»¶
          cat > src/components/layout/Sidebar.vue << 'EOF'
          <template>
            <aside class="w-64 bg-white shadow-sm h-screen sticky top-0">
              <nav class="p-4">
                <el-menu
                  :default-active="$route.path"
                  class="border-0"
                  router
                >
                  <el-menu-item index="/">
                    <el-icon><DataBoard /></el-icon>
                    <span>æ¦‚è§ˆæ€»è§ˆ</span>
                  </el-menu-item>
                  <el-menu-item index="/collection">
                    <el-icon><Collection /></el-icon>
                    <span>æ•°æ®é‡‡é›†</span>
                  </el-menu-item>
                  <el-menu-item index="/analysis">
                    <el-icon><DataAnalysis /></el-icon>
                    <span>æƒ…æŠ¥åˆ†æ</span>
                  </el-menu-item>
                  <el-menu-item index="/action">
                    <el-icon><Lightning /></el-icon>
                    <span>è¡ŒåŠ¨å»ºè®®</span>
                  </el-menu-item>
                  <el-menu-item index="/reports">
                    <el-icon><Document /></el-icon>
                    <span>æŠ¥å‘Šä¸­å¿ƒ</span>
                  </el-menu-item>
                </el-menu>
              </nav>
            </aside>
          </template>

          <script setup>
          import { 
            DataBoard, 
            Collection, 
            DataAnalysis, 
            Lightning, 
            Document 
          } from '@element-plus/icons-vue'
          </script>
          EOF

          # Footerç»„ä»¶
          cat > src/components/layout/Footer.vue << 'EOF'
          <template>
            <footer class="bg-white border-t mt-8">
              <div class="px-6 py-4">
                <div class="flex items-center justify-between text-sm text-gray-600">
                  <div>
                    Â© 2025 ICTæŠ€æœ¯æƒ…æŠ¥å†³ç­–å¼•æ“. Powered by Make.com + Google Sheets + GitHub Pages
                  </div>
                  <div class="flex items-center space-x-4">
                    <span>ç³»ç»ŸçŠ¶æ€: <span class="text-green-600">â— æ­£å¸¸</span></span>
                    <span>æ•°æ®æ›´æ–°: æ¯æ—¥ 08:00</span>
                  </div>
                </div>
              </div>
            </footer>
          </template>
          EOF

      - name: Generate View Components
        run: |
          # Overviewé¡µé¢
          cat > src/views/Overview.vue << 'EOF'
          <template>
            <div class="space-y-6">
              <div class="flex items-center justify-between">
                <h2 class="text-3xl font-bold text-gray-900">æ¦‚è§ˆæ€»è§ˆ</h2>
                <el-button type="primary" @click="refreshData">
                  <el-icon><Refresh /></el-icon>
                  åˆ·æ–°æ•°æ®
                </el-button>
              </div>

              <!-- KPIæŒ‡æ ‡å¡ç‰‡ -->
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div v-for="kpi in kpiMetrics" :key="kpi.title" class="tech-card">
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="text-sm text-gray-600">{{ kpi.title }}</p>
                      <p class="text-2xl font-bold text-gray-900">{{ kpi.value }}</p>
                      <p class="text-sm" :class="kpi.trend > 0 ? 'trend-up' : 'trend-down'">
                        {{ kpi.trend > 0 ? 'â†—' : 'â†˜' }} {{ Math.abs(kpi.trend) }}%
                      </p>
                    </div>
                    <div class="text-3xl">{{ kpi.icon }}</div>
                  </div>
                </div>
              </div>

              <!-- æœ€æ–°æƒ…æŠ¥ -->
              <div class="tech-card">
                <h3 class="text-xl font-semibold mb-4">ğŸ¯ æœ€æ–°æŠ€æœ¯æƒ…æŠ¥</h3>
                <div class="space-y-4">
                  <div v-for="intel in latestIntelligence" :key="intel.id" 
                       class="border-l-4 border-blue-500 pl-4 py-2">
                    <h4 class="font-medium text-gray-900">{{ intel.title }}</h4>
                    <p class="text-sm text-gray-600">{{ intel.summary }}</p>
                    <div class="flex items-center space-x-4 mt-2 text-xs text-gray-500">
                      <span>ä¿¡å·å¼ºåº¦: {{ intel.signalStrength }}/10</span>
                      <span>å•†ä¸šä»·å€¼: {{ intel.commercialValue }}/10</span>
                      <span>{{ intel.createdAt }}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </template>

          <script setup>
          import { ref, onMounted } from 'vue'
          import { Refresh } from '@element-plus/icons-vue'
          import { ElMessage } from 'element-plus'

          const kpiMetrics = ref([
            { title: 'ä»Šæ—¥æ–°å¢æƒ…æŠ¥', value: '12', trend: 8.5, icon: 'ğŸ¯' },
            { title: 'å¾…åˆ†æä¿¡å·', value: '28', trend: -2.1, icon: 'âš¡' },
            { title: 'é«˜ä»·å€¼æœºä¼š', value: '5', trend: 15.3, icon: 'ğŸ’' },
            { title: 'ç´§æ€¥é¢„è­¦', value: '2', trend: -12.5, icon: 'ğŸš¨' }
          ])

          const latestIntelligence = ref([
            {
              id: 1,
              title: 'é‡å­è®¡ç®—åœ¨é‡‘èé£æ§é¢†åŸŸçš„çªç ´æ€§åº”ç”¨',
              summary: 'IBMå‘å¸ƒæ–°å‹é‡å­ç®—æ³•ï¼Œå¯å°†é£é™©è®¡ç®—é€Ÿåº¦æå‡1000å€...',
              signalStrength: 9.2,
              commercialValue: 8.8,
              createdAt: '2å°æ—¶å‰'
            },
            {
              id: 2,
              title: '6Gé€šä¿¡æ ‡å‡†åˆ¶å®šè¿›å…¥å…³é”®é˜¶æ®µ',
              summary: '3GPPç»„ç»‡å®£å¸ƒ6Gæ ‡å‡†åŒ–æ—¶é—´è¡¨ï¼Œé¢„è®¡2028å¹´å•†ç”¨...',
              signalStrength: 8.7,
              commercialValue: 9.1,
              createdAt: '4å°æ—¶å‰'
            }
          ])

          const refreshData = () => {
            ElMessage.success('æ•°æ®åˆ·æ–°æˆåŠŸï¼')
          }

          onMounted(() => {
            // é¡µé¢åˆå§‹åŒ–é€»è¾‘
          })
          </script>
          EOF

          # Collectioné¡µé¢
          cat > src/views/Collection.vue << 'EOF'
          <template>
            <div class="space-y-6">
              <div class="flex items-center justify-between">
                <h2 class="text-3xl font-bold text-gray-900">æ•°æ®é‡‡é›†ç›‘æ§</h2>
                <div class="flex space-x-2">
                  <el-button @click="toggleAutoRefresh">
                    {{ autoRefresh ? 'åœæ­¢è‡ªåŠ¨åˆ·æ–°' : 'å¼€å¯è‡ªåŠ¨åˆ·æ–°' }}
                  </el-button>
                  <el-button type="primary" @click="refreshData">
                    <el-icon><Refresh /></el-icon>
                    ç«‹å³åˆ·æ–°
                  </el-button>
                </div>
              </div>

              <!-- æŠ€æœ¯æ•°æ®ç›‘æ§åŒºåŸŸ -->
              <div class="tech-card">
                <h3 class="text-xl font-semibold mb-4">ğŸ“Š æŠ€æœ¯æ•°æ®ç›‘æ§</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                  <div v-for="data in techDataStatus" :key="data.title" 
                       class="border rounded-lg p-4 hover:shadow-md transition-shadow">
                    <div class="flex items-center justify-between mb-2">
                      <span class="text-2xl">{{ data.icon }}</span>
                      <span class="status-active">{{ data.status }}</span>
                    </div>
                    <h4 class="font-medium text-gray-900">{{ data.title }}</h4>
                    <div class="mt-2 space-y-1 text-sm">
                      <div class="flex justify-between">
                        <span class="text-gray-600">ä»Šæ—¥é‡‡é›†:</span>
                        <span class="font-medium">{{ data.todayCount }}</span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-gray-600">æˆåŠŸç‡:</span>
                        <span class="font-medium text-green-600">{{ data.successRate }}%</span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-gray-600">è´¨é‡è¯„åˆ†:</span>
                        <span class="font-medium">{{ data.avgQualityScore }}/10</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ä¸šç•Œæ ‡æ†ç›‘æ§åŒºåŸŸ -->
              <div class="tech-card">
                <h3 class="text-xl font-semibold mb-4">ğŸ­ ä¸šç•Œæ ‡æ†ç›‘æ§</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                  <div v-for="benchmark in benchmarkStatus" :key="benchmark.title" 
                       class="border rounded-lg p-4 hover:shadow-md transition-shadow">
                    <div class="flex items-center justify-between mb-2">
                      <span class="text-2xl">{{ benchmark.icon }}</span>
                      <span class="status-active">{{ benchmark.status }}</span>
                    </div>
                    <h4 class="font-medium text-gray-900">{{ benchmark.title }}</h4>
                    <div class="mt-2 space-y-1 text-sm">
                      <div class="flex justify-between">
                        <span class="text-gray-600">ä»Šæ—¥äº‹ä»¶:</span>
                        <span class="font-medium">{{ benchmark.todayCount }}</span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-gray-600">å½±å“è¯„åˆ†:</span>
                        <span class="font-medium text-orange-600">{{ benchmark.avgImpactScore }}/10</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </template>

          <script setup>
          import { ref, onMounted, onUnmounted } from 'vue'
          import { Refresh } from '@element-plus/icons-vue'
          import { ElMessage } from 'element-plus'

          const autoRefresh = ref(false)
          let refreshTimer = null

          const techDataStatus = ref([
            {
              title: 'å­¦æœ¯è®ºæ–‡',
              icon: 'ğŸ“š',
              status: 'active',
              todayCount: 45,
              successRate: 98.5,
              avgQualityScore: 8.2
            },
            {
              title: 'ä¸“åˆ©æ•°æ®',
              icon: 'ğŸ”¬',
              status: 'active',
              todayCount: 78,
              successRate: 96.8,
              avgQualityScore: 7.9
            },
            {
              title: 'å¼€æºé¡¹ç›®',
              icon: 'ğŸ’»',
              status: 'active',
              todayCount: 23,
              successRate: 94.2,
              avgQualityScore: 8.5
            },
            {
              title: 'æŠ€æœ¯æ–°é—»',
              icon: 'ğŸ“°',
              status: 'active',
              todayCount: 156,
              successRate: 99.1,
              avgQualityScore: 7.5
            }
          ])

          const benchmarkStatus = ref([
            {
              title: 'æ ‡æ†åŠ¨æ€',
              icon: 'ğŸ­',
              status: 'active',
              todayCount: 32,
              avgImpactScore: 8.1
            },
            {
              title: 'æŠ€æœ¯åˆ›æ–°',
              icon: 'ğŸš€',
              status: 'active',
              todayCount: 18,
              avgImpactScore: 8.7
            },
            {
              title: 'äº§å“å‘å¸ƒ',
              icon: 'ğŸ“±',
              status: 'active',
              todayCount: 8,
              avgImpactScore: 7.8
            },
            {
              title: 'äººæ‰æµåŠ¨',
              icon: 'ğŸ‘¥',
              status: 'active',
              todayCount: 12,
              avgImpactScore: 8.3
            }
          ])

          const refreshData = () => {
            ElMessage.success('æ•°æ®åˆ·æ–°æˆåŠŸï¼')
          }

          const toggleAutoRefresh = () => {
            autoRefresh.value = !autoRefresh.value
            if (autoRefresh.value) {
              refreshTimer = setInterval(refreshData, 30000) // 30ç§’åˆ·æ–°ä¸€æ¬¡
              ElMessage.info('å·²å¼€å¯è‡ªåŠ¨åˆ·æ–°ï¼ˆ30ç§’é—´éš”ï¼‰')
            } else {
              clearInterval(refreshTimer)
              ElMessage.info('å·²åœæ­¢è‡ªåŠ¨åˆ·æ–°')
            }
          }

          onUnmounted(() => {
            if (refreshTimer) {
              clearInterval(refreshTimer)
            }
          })
          </script>
          EOF

          # ç”Ÿæˆå…¶ä»–é¡µé¢çš„åŸºç¡€ç»“æ„
          for page in Analysis Action Reports; do
            cat > src/views/${page}.vue << EOF
          <template>
            <div class="space-y-6">
              <h2 class="text-3xl font-bold text-gray-900">${page}</h2>
              <div class="tech-card">
                <p class="text-gray-600">ğŸš§ ${page}é¡µé¢æ­£åœ¨å¼€å‘ä¸­...</p>
              </div>
            </div>
          </template>

          <script setup>
          // ${page}é¡µé¢é€»è¾‘
          </script>
          EOF
          done

      - name: Generate Sample Data
        run: |
          # ç”Ÿæˆç¤ºä¾‹æ•°æ®æ–‡ä»¶
          cat > data/collection/tech-data-status.json << 'EOF'
          {
            "lastUpdated": "2025-06-23T10:00:00Z",
            "techData": {
              "academicPapers": {
                "title": "å­¦æœ¯è®ºæ–‡",
                "icon": "ğŸ“š",
                "status": "active",
                "todayCount": 45,
                "totalCount": 1250,
                "successRate": 98.5,
                "avgQualityScore": 8.2,
                "topKeywords": ["AI", "5G", "é‡å­è®¡ç®—"],
                "trendData": [30, 35, 42, 38, 45],
                "lastUpdate": "2025-06-23T09:30:00Z"
              }
            }
          }
          EOF

          cat > data/overview/kpi-metrics.json << 'EOF'
          {
            "lastUpdated": "2025-06-23T10:00:00Z",
            "metrics": {
              "dailyIntelligence": 12,
              "pendingSignals": 28,
              "highValueOpportunities": 5,
              "criticalAlerts": 2
            }
          }
          EOF

      - name: Install Dependencies and Generate Lock File
        run: |
          echo "ğŸ“¦ Installing dependencies and generating lock file..."
          npm install
          
          # ç¡®ä¿lockæ–‡ä»¶å­˜åœ¨
          if [ ! -f "package-lock.json" ]; then
            echo "âŒ package-lock.json not generated, creating manually..."
            npm install --package-lock-only
          fi
          
          echo "âœ… Dependencies installed successfully!"
          ls -la package*.json

      - name: Build Application
        run: |
          echo "ğŸ”¨ Building Vue.js application..."
          npm run build
        env:
          NODE_ENV: production

      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        if: github.ref == 'refs/heads/main'
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./dist
          cname: # å¦‚æœæœ‰è‡ªå®šä¹‰åŸŸåï¼Œåœ¨è¿™é‡Œé…ç½®

      - name: Commit Generated Files
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add .
          git commit -m "ğŸš€ Complete Tech Insight project setup with all dependencies" || exit 0
          git push
